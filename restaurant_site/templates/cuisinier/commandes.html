{% extends 'authentification/accueil.html' %}

{% block title %}
<title>Cuisinier Restaurant</title>
{% endblock %}

{% block style %}
<style>
  header {
    position: relative;
    height: 80vh;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
}

header .overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.4); /* fonce un peu l’image pour lire le texte */
    z-index: 1;
}

header .container {
    z-index: 2;
    position: relative;
}

.img-custom-height {
  max-height: 300px;
  object-fit: cover;
  width: 300px;
}

    body {
      margin: 0;
      font-family: 'Times New Roman', Times, serif;
      color: rgb(19, 19, 19);
    }

    .card-img-top {
      height: 200px;
      object-fit: cover;
    }

@media (min-width: 768px) {
  .card-img-top {
    height: 220px;
  }
}
</style>
{% endblock %}

{% block nav %}
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top px-5">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">L'Occidental</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
  <li class="nav-item"><a class="nav-link" href="{% url 'accueil' %}">Page d'accueil</a></li>
  <li class="nav-item"><a class="nav-link" href="{% url 'menu' %}">Menu</a></li>
  <li class="nav-item"><a class="nav-link" href="{% url 'commandes' %}">Commandes</a></li>
  <li class="nav-item"><a class="nav-link" href="{% url 'notifications' %}">Notification</a></li>
</ul>
    </div>
  </div>
</nav>
{% endblock %}

{% block header %}
<!-- Header -->
<header class="d-flex align-items-center justify-content-center text-center text-white">
  <div class="overlay"></div>
  <div class="container position-relative">
    <h1 class="display-4">Commandes en attente</h1>
    <p class="lead">Gérez vos commandes efficacement.</p>
  </div>
</header>
{% endblock %}

{% block section %}

<!-- Sections -->
<section class="container-fluid py-5">
  <div class="row align-items-center">
    <div class="col-md-6 text-center">
      <img src="/media/images/commande1.jpg" class="img-fluid img-custom-height" alt="Simplicité d'utilisation">
    </div>
    <div class="col-md-6">
      <h2>Affichage par statut</h2>
      <p>Visualisez les plats à préparer selon leur statut : à préparer, en cours ou prêt. Cette fonctionnalité vous permet de prioriser vos tâches en fonction de l'urgence et de l'état de chaque commande. Cela garantit une préparation fluide et organisée des plats.</p>
      <a href="#" class="btn btn-secondary btn-lg rounded-pill px-4 py-2 shadow">Voir les status</a>
    </div>
  </div>
</section>

<section class="container-fluid py-5">
  <div class="row align-items-center flex-md-row-reverse">
    <div class="col-md-6 text-center">
      <img src="/media/images/commande2.jpg" class="img-fluid img-custom-height" alt="Sécurité renforcée">
    </div>
    <div class="col-md-6">
      <h2>Filtrage des commandes</h2>
      <p>Appliquez des filtres pour afficher uniquement les commandes qui vous intéressent. Que ce soit par temps d'attente ou par priorité, cette option vous aide à vous concentrer sur ce qui est le plus important. Optimisez votre temps en préparant d'abord les plats urgents.</p>
      <a href="#" class="btn btn-secondary btn-lg rounded-pill px-4 py-2 shadow">Filtrer maintenant</a>
    </div>
  </div>
</section>

<section class="container-fluid py-5">
  <div class="row align-items-center">
    <div class="col-md-6 text-center">
      <img src="/media/images/commande3.jpg" class="img-fluid img-custom-height" alt="Support client réactif">
    </div>
    <div class="col-md-6">
      <h2>Regroupement par type de plat</h2>
      <p>Organisez les commandes par type de plat pour une préparation plus efficace. Que ce soit les entrées, plats principaux ou desserts, ce regroupement facilite la gestion de la cuisine. Vous pouvez ainsi coordonner les efforts de votre équipe avec précision.</p>
      <a href="#" class="btn btn-secondary btn-lg rounded-pill px-4 py-2 shadow">Afficher par type</a>
    </div>
  </div>
</section>

<!-- Features -->
<section class="container-fluid py-5 text-center" style="background-color: #000;">
  <h2 class="display-5 text-white">Détails de la commande</h2>
  <p class="lead text-white">Accédez aux informations complètes sur nos commandes.</p>

  <div class="container mt-4">
    {% for commande in commandes %}
      <div class="card bg-dark text-white mb-4 shadow">
        <div class="card-header d-flex justify-content-between align-items-center">
          <span>Commande #{{ commande.id }} | Client : {{ commande.client.username }}</span>
          <span>{{ commande.date_commande|date:"d/m/Y H:i" }}</span>
        </div>
        <div class="card-body">
          <!-- TABLEAU AVEC FOND CLAIR -->
          <table class="table table-bordered table-light table-hover m-0 text-dark">
            <thead class="table-secondary">
              <tr>
                <th>Plat</th>
                <th>Quantité</th>
                <th>Prix unitaire</th>
                <th>Total ligne</th>
              </tr>
            </thead>
            <tbody>
              {% for ligne in commande.lignes.all %}
              <tr>
                <td>{{ ligne.plat.nom }}</td>
                <td>{{ ligne.quantite }}</td>
                <td>{{ ligne.prix_unitaire }} F CFA</td>
                <td>{{ ligne.total_ligne }} F CFA</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <div class="text-end mt-3">
            <strong>Total commande : {{ commande.total_paiement }} F CFA</strong>
          </div>
        </div>
      </div>
    {% empty %}
      <p class="text-white">Aucune commande enregistrée.</p>
    {% endfor %}
  </div>
</section>




{% endblock %}





